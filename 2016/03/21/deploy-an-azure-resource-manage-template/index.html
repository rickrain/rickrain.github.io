<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="d ago"><meta name="hour-prompt" content="hr ago"><meta name="minute-prompt" content="min ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Deploy an Azure Resource Manager Template" /><meta property="og:locale" content="en" /><meta name="description" content="In my previous post I showed how to use Visual Studio 2015 to author a simple Azure Resource Manager (ARM) template from scratch. In this post, I will discuss a few options for deploying that template. Specifically, I will show how to" /><meta property="og:description" content="In my previous post I showed how to use Visual Studio 2015 to author a simple Azure Resource Manager (ARM) template from scratch. In this post, I will discuss a few options for deploying that template. Specifically, I will show how to" /><link rel="canonical" href="https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/" /><meta property="og:url" content="https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/" /><meta property="og:site_name" content="Rick Rainey" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2016-03-21T16:06:04-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Deploy an Azure Resource Manager Template" /><meta name="twitter:site" content="@rickraineytx" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-09-22T15:38:09-05:00","datePublished":"2016-03-21T16:06:04-05:00","description":"In my previous post I showed how to use Visual Studio 2015 to author a simple Azure Resource Manager (ARM) template from scratch. In this post, I will discuss a few options for deploying that template. Specifically, I will show how to","headline":"Deploy an Azure Resource Manager Template","mainEntityOfPage":{"@type":"WebPage","@id":"https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/"},"url":"https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/"}</script><title>Deploy an Azure Resource Manager Template | Rick Rainey</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Rick Rainey"><meta name="application-name" content="Rick Rainey"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/rick-outdoors.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Rick Rainey</a></div><div class="site-subtitle font-italic">Where I share my learnings to help others</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/rickrain" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/rickraineytx" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['rickrain','hotmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Deploy an Azure Resource Manager Template</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Deploy an Azure Resource Manager Template</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Rick Rainey </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 21, 2016, 4:06 PM -0500" >Mar 21, 2016<i class="unloaded">2016-03-21T16:06:04-05:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Sep 22, 2021, 3:38 PM -0500" >Sep 22, 2021<i class="unloaded">2021-09-22T15:38:09-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2142 words">11 min read</span></div></div><div class="post-content"><p>In my previous <a href="http://rickrainey.com/2016/02/22/author-azure-resource-manager-template-using-visual-studio/">post</a> I showed how to use Visual Studio 2015 to author a simple Azure Resource Manager (ARM) template from scratch. In this post, I will discuss a few options for deploying that template. Specifically, I will show how to</p><ul><li>deploy using Azure PowerShell<li>deploy using Azure Command-line Interface (CLI)<li>deploy using Visual Studio<li>deploy using the Azure Portal</ul><p>If you want to get hands-on with the techniques described in this post then use the solution I walked through in the last post. A copy of that solution is available <a href="https://github.com/rickrain/ARM-Basics">on my GitHub account</a>.</p><h2 id="deploy-using-azure-powershell">Deploy using Azure PowerShell</h2><p>This is the most obvious and preferred method if you or the person deploying your template is a Microsoft Windows user. All you need on your machine is PowerShell 3.0 or newer and a couple Azure “RM” PowerShell Cmdlets. For this post, I have the following versions installed.</p><ul><li>PowerShell v5.0.10586.122<li>AzureRM.Resources v1.05</ul><p>If you already have PowerShell and the Azure “RM” PowerShell cmdlets installed, then feel free to skip the next section. If you do not or are not sure then continue.</p><h3 id="setup-azure-powershell">Setup Azure PowerShell</h3><p>If you don’t have Azure PowerShell installed, then you can install the latest from here.</p><p>To see what version of PowerShell you have installed, open a PowerShell console prompt and type <code class="language-plaintext highlighter-rouge">$PSVersoinTable.PSVersion</code>.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span text-data=" Plaintext "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>PS C:\&gt; $PSVersionTable.PSVersion
Major Minor Build Revision
—– —– —– ——–
5 0 10586 122
</pre></table></code></div></div><p>To see what version of Azure “RM” PowerShell Modules (cmdlets) you have installed use <code class="language-plaintext highlighter-rouge">Get-Module</code> as shown below.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span text-data=" Plaintext "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>PS C:\&gt; Get-Module -ListAvailable | Where-Object { $_.Name -like "AzureRM*" } | Select Name, Version
 
Name                        Version
----                        -------
AzureRM.ApiManagement       1.0.5 
AzureRM.Automation          1.0.5 
AzureRM.AzureStackAdmin     0.9.2 
&lt;... abbreviated ... &gt;
AzureRM.Resources           1.0.5 
AzureRM.SiteRecovery        1.1.4 
&lt;... abbreviated ... &gt;
AzureRM.Websites            1.0.5
</pre></table></code></div></div><p>You will also need to configure PowerShell’s execution policy on your machine to allow you to execute scripts. To do that, use the <code class="language-plaintext highlighter-rouge">Set-ExecutionPolicy</code> command as shown here.</p><pre><code class="language-PowerShell">PS C:\&gt; Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Force
</code></pre><blockquote><p>Note: To set the execution policy you will need to be running your PowerShell command prompt (or PowerShell ISE) as an administrator. Setting the execution policy is a one-time step and does not need to be repeated.</p></blockquote><h3 id="deploy-the-arm-template">Deploy the ARM Template</h3><p>Recall from the last post that Visual Studio created a deployment script for me titled <code class="language-plaintext highlighter-rouge">Deploy-AzureResourceGroup.ps1</code>. It is located in the Scripts folder of the project as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-01.png" alt="Deploys Azure Resource Group" /></p><p>So, the easiest method to deploy the template is to simply just invoke this script to do the work. However, before you can invoke the script you must first authenticate to your Azure subscription.</p><p>I’m going to use PowerShell ISE (powershell_ise.exe) for this and open Deploy-AzureResourceGroup.ps1. The upper window in PowerShell ISE is the script pane and the lower (blue) window is the console pane. In the console pane invoke the <code class="language-plaintext highlighter-rouge">Login-AzureRmAccount</code> command to authenticate to your Azure subscription. After successfully authenticating click the play button in the toolbar (or press F5) to run the script in the script pane as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-02.png" alt="PowerShell Deploy" /></p><p>When you run this script you will be prompted for mandatory parameters of the script, in this case, the <em>ResourceGroupLocation</em> parameter for which I supplied the value “West US” (without quotes). You will also be prompted (in a dialog window) for the virtual machine admin password you want to use when connecting to the VM using RDP.</p><blockquote><p>Note: The admin password is a parameter that the template expects. The ResourceGroupLocation parameter is a parameter that the Deploy-AzureResourceGroup.ps1 script expects.</p></blockquote><p>After providing the necessary parameters the resources will proceed to be provisioned as shown below.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-03.png" alt="PowerShell Resources Provisioning" /></p><p>After a few minutes the deployment will be completed. A successful deployment will look similar to what is shown below where the ProvisioningState is reported as Succeeded. Also notice that in the Outputs section the FQDN of the VM, which can be used to connect to the VM using RDP.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-04.png" alt="PowerShell Resources Provisioning" /></p><h2 id="deploy-using-the-azure-command-line-interface-cli">Deploy using the Azure Command-Line Interface (CLI)</h2><p>The Azure CLI tools provide cross-platform support for managing your Azure resources. So, if you or the person deploying your template is running Max (OS X) or Linux then Azure CLI can be used to complete the task. The Azure CLI tools also are available on the Windows platform.</p><p>If you already have the Azure CLI installed, then feel free to skip the next section. If you do not or are not sure then continue.</p><h3 id="setup-azure-cli">Setup Azure CLI</h3><p>If you don’t have the Azure CLI installed, then you can install it using the <a href="http://go.microsoft.com/?linkid=9828653&amp;clcid=0x409">Windows Installer</a>, <a href="http://go.microsoft.com/fwlink/?LinkId=252249">OS X Installer</a> or <a href="http://go.microsoft.com/fwlink/?linkid=253472">Linux Installer</a>.</p><p>To see what version of Azure CLI you have installed, open a command prompt, type <code class="language-plaintext highlighter-rouge">azure</code>, and press <code class="language-plaintext highlighter-rouge">ENTER</code>.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-05.png" alt="CLI Azure Version" /></p><h3 id="deploy-the-arm-template-1">Deploy the ARM Template</h3><p>The deployment experience using Azure CLI is very similar to the deployment experience using PowerShell as described above. However, there are a few subtle differences that I will call out in this section.</p><p>To deploy the template using Azure CLI, start by opening a command prompt (if you’re on windows). Or a terminal session on Mac or Linux.</p><p>Just as before in the PowerShell scenario, you must authenticate to Azure first before you can deploy your template. To authenticate using Azure CLI, type azure login and press ENTER. The authentication experience will require you to open a browser to <a href="https://aks.ms/devicelogin">https://aks.ms/devicelogin</a> and enter a code (provided by the CLI) as shown below. Afterwards, you will be able to authenticate to Azure using your normal Azure subscription credentials.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-06.png" alt="CLI Azure Login" /></p><p>Next, you must switch your CLI session to use Azure Resource Manager. At the time of this writing, it defaults to the Azure Service Management (ASM) mode. To switch to ARM mode, type <code class="language-plaintext highlighter-rouge">azure config mode arm</code> and press <code class="language-plaintext highlighter-rouge">ENTER</code> as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-07.png" alt="CLI Azure Azure Config Mode ARM" /></p><p>Azure CLI does not prompt for missing/mandatory parameters like PowerShell does so you have to specify all your parameters when you invoke the command to start the deployment. You can provide all the parameters inline on the command line <em>or</em> using a parameters file. However, you cannot use a combination of these. It must be one or the other. Since we already have a parameters file in this scenario, we will go with the latter. However, the <em>azuredeploy.parameters.json</em> file does not provide the admin password for the VM that the template expects. So, before proceeding, update the <em>azuredeploy.parameters.json</em> file to include this parameter value as shown here.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span text-data=" JSON "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contentVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"MyVMName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myVM"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"MyVMAdminUserName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adminuser"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"MyPublicIPDnsName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rickrainey-demovm"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"MyStorageType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard_LRS"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"MyVMAdminPassword"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"P@ssword1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>With that change in place, the parameters file provides all the parameters necessary to deploy the template using Azure CLI.</p><p>To create the resource group called “ARMBasics” and deploy the template using the parameter values in the parameters file, type <code class="language-plaintext highlighter-rouge">azure group create -n “ARMBasics” -l “West US” -f “&lt;path to template file&gt;\azuredeploy.json” -e “&lt;path to template parameters file&gt;\azuredeploy.parameters.json”</code> and press <code class="language-plaintext highlighter-rouge">ENTER</code> as shown here. After a few minutes the resources described in the template file will be provisioned in the resource group. And just like in the PowerShell scenario, a successful deployment will show Succeeded for the <em>ProvisioningState</em>.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-08.png" alt="CLI Template Deployment" /></p><h2 id="deploy-using-visual-studio">Deploy using Visual Studio</h2><p>If you used Visual Studio to author your template, then it is convenient to just deploy directly from Visual Studio. I do this when I am testing things out. However, once I am finished I prefer to just use the PowerShell and CLI methods as described above.</p><p>When you deploy using Visual Studio, it simply invokes the same script, <em>.Scripts\Deploy-AzureResourceGroup.ps1</em>, which was shown in the Deploy using PowerShell section. So, there’s nothing particularly magical that Visual Studio is doing for you here except giving you a nice UI experience to invoke the script and provide some parameter values. I’ll come back to this later in this section.</p><p>To use Visual Studio to deploy the ARM template, open the “ARMBasics” solution created using Visual Studio in the last post. From the main menu, select <strong>Project &gt; Deploy &gt; New Deployment</strong>. In the dialog that opens, select <strong>&lt;create new&gt;</strong> for the Resource group field, which will cause another window to open where you can specify the name and location of your resource group as shown below. When finished click <strong>Create</strong>.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-09.png" alt="Create Resource Group Project" /></p><p>At this stage, an empty resource group is created in the selected region using the given name and you are returned back to the previous dialog as shown below. The Deployment template and Template parameters file fields are defaulted to the only values available. However, in more complex templates, you may have multiple deployment templates and you most certainly would have multiple template parameter files to feed different parameter values to different deployment environments (ie: DevTest, Staging, Production, etc.).</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-10.png" alt="Deploy Resource Group Project" /></p><p>The dialog also gives you an opportunity to edit the template parameter values directly by pressing the <strong>Edit Parameters</strong> button. Doing so will open a new dialog where you can specify the values for each parameter of your template as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-11.png" alt="Edit Resource Group Project Parameters" /></p><p>After setting the parameter values to your liking, click the <strong>Save</strong> button to save the values. The parameter values you specify are stored in the <em>.\Templates\azuredeploy.parameters.json</em> file.</p><blockquote><p>Note: Generally, you don’t want to store passwords in your template parameters file which is why it was left null in the image above. If you do want to save your password to the parameters file, then type it in and make sure you check the <strong>Save passwords</strong> checkbox. Otherwise, Visual Studio will prompt you for the password again when you deploy the template.</p></blockquote><p>After setting your parameter values you are returned back to the previous dialog. Click the <strong>Deploy</strong> button to start the deployment. At this time, you will be prompted to enter the password if you didn’t do so in the Edit Parameters dialog shown above.</p><p>The deployment progress is displayed in the Output window as shown below. If you don’t see it your environment, then from the main menu select <strong>View &gt; Output</strong>. Coming back to the statement earlier in this section about Visual Studio just invoking the <code class="language-plaintext highlighter-rouge">Deploy-AzureResourceGroup.ps1</code> script to deploy the template, this is evident in the Output window of the deployment as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-12.png" alt="Output for Resource Group Project Deployment" /></p><p>The rest of the deployment is shown in the Output window as the deployment progresses as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-13.png" alt="Output for Resource Group Project Deployment" /></p><p>The deployment will take a few minutes to fully complete.</p><h2 id="deploy-using-the-azure-portal">Deploy using the Azure portal</h2><p>You can deploy your template using the Azure Portal. In fact, you can even edit your template directly in the portal. This is handy in situations where you want to test something out with just a browser. In this scenario, all you need is the template file. In the portal click <strong>+New</strong> and search for “Template deployment” as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-14.png" alt="New Template Deployment" /></p><p>In the search results blade select <strong>Template deployment</strong>. In the Template deployment blade click <strong>Create</strong>. This will open the Custom deployment blade where you can edit the template, provide parameters, specify the resource group name, and location. Click on the <strong>Edit template</strong> option as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-15.png" alt="Edit Template Deployment" /></p><p>In the Edit template blade replace the text with the text from the * <em>.\Scripts\azuredeploy.json</em> file and click <strong>Save</strong> as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-16.png" alt="Save Edits for Template Deployment" /></p><p>In the Custom deployment blade, click the <strong>Edit parameters</strong> option as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-17.png" alt="Edit Template Deployment Parameters" /></p><p>In the Parameters blade specify the values for each of the parameters the deployment template expects and then click <strong>OK</strong> as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-18.png" alt="Provide Template Deployment Parameter Values" /></p><p>In the Custom deployment blade set Resource group to <strong>+New</strong> and specify a name for the resource group. Next, select a location for the deployment, review the legal terms and click <strong>Create</strong> as shown here.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-19.png" alt="Deploy Template" /></p><p>After a few minutes the resources described in the template will be provisioned using the parameter values specified above and the Resource group blade in the portal will show all the resources in the group.</p><p><img data-proofer-ignore data-src="/assets/img/deploy-an-azure-resource-manager-tempate-20.png" alt="Resources" /></p><h2 id="summary">Summary</h2><p>This post demonstrated techniques for deploying an ARM template. The first technique used Azure PowerShell to invoke the deployment script, Deploy-AzureResourceGroup.ps1, that Visual Studio created when the resource group project was created in the last post. Next, I showed how to use the Azure Command-Line Interface (CLI) tools to deploy the template file, azuredeploy.json, using parameter values from the template parameters file, azuredeploy.parameters.json. In the Azure CLI case, the deployment script is not used – just the template and template parameters file. Next, I showed how to deploy directly from Visual Studio and pointed out that doing so performs the exact same steps as shown in the Azure PowerShell case, but with some added UI features from Visual Studio to capture parameter values. Finally, I showed you how you can deploy a template using only your browser by leveraging the Template deployment feature in the Azure portal.</p><div id="disqus_thread"></div><script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = ""; // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = "/2016/03/21/deploy-an-azure-resource-manage-template/"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function() { // DON'T EDIT BELOW THIS LINE var d = document, s = d.createElement('script'); s.src = 'https://rickrainey.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Deploy an Azure Resource Manager Template - Rick Rainey&url=https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Deploy an Azure Resource Manager Template - Rick Rainey&u=https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Deploy an Azure Resource Manager Template - Rick Rainey&url=https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ubuntu-dev-setup/">Developer Laptop Setup on Ubuntu</a><li><a href="/posts/ckad-tips/">CKAD Exam Tips</a><li><a href="/2013/04/16/polyglot-persistence-in-windows-azure/">Polyglot Persistence in Windows Azure</a><li><a href="/2013/05/22/implementing-polyglot-persistence-part-1/">Implementing Polyglot Persistence – Part 1</a><li><a href="/2013/05/27/setting-up-a-neo4j-server-running-on-ubuntu-in-windows-azure/">Setting up a Neo4j Server running on Ubuntu in Windows Azure</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ubuntu-dev-setup/"><div class="card-body"> <span class="timeago small" >Dec 6, 2021<i class="unloaded">2021-12-06T09:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Developer Laptop Setup on Ubuntu</h3><div class="text-muted small"><p> This blog is really a crutch for me to remember how I like to setup my Ubuntu desktop for development work. I recently got a new laptop and had to go through the process again of setting it up the ...</p></div></div></a></div><div class="card"> <a href="/posts/ckad-tips/"><div class="card-body"> <span class="timeago small" >Oct 12, 2021<i class="unloaded">2021-10-12T10:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CKAD Exam Tips</h3><div class="text-muted small"><p> I recently took and passed the CKAD Exam and now the proud owner of the CKAD Certification issued by The Linux Foundation. Like so many others who have accomplished this, I decided to share some ti...</p></div></div></a></div><div class="card"> <a href="/2016/06/22/add-a-custom-device-to-the-azure-iot-suite-remote-monitoring-solution/"><div class="card-body"> <span class="timeago small" >Jun 22, 2016<i class="unloaded">2016-06-22T16:06:04-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Add a custom device to the Azure IoT Suite Remote Monitoring solution</h3><div class="text-muted small"><p> Today, Azure IoT Suite provides two end-to-end IoT solutions; Predictive Maintenance and Remote Monitoring. These solutions can be deployed into your Azure subscription and running in just a few mi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/2016/02/22/author-azure-resource-manager-template-using-visual-studio/" class="btn btn-outline-primary" prompt="Older"><p>Author an Azure Resource Manager Template using Visual Studio</p></a> <a href="/2016/06/22/add-a-custom-device-to-the-azure-iot-suite-remote-monitoring-solution/" class="btn btn-outline-primary" prompt="Newer"><p>Add a custom device to the Azure IoT Suite Remote Monitoring solution</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://rickrainey.com/2016/03/21/deploy-an-azure-resource-manage-template/'; this.page.identifier = '/2016/03/21/deploy-an-azure-resource-manage-template/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://rickrainey.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/rickraineytx">Rick Rainey</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
